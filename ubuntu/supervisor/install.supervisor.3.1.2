#! /bin/sh

#  Script for the installation of Supervisor 3.1.2
#  @author  Charles Akalugwu <charles@takeaway.com>
#  @since   25.09.2014


#  Install pip python package manager
    
    sudo apt-get install python-pip
    
#  Use pip to install supervisor 3.1.2
    
    sudo pip install supervisor==3.1.2
    
#  Create needed directories
    
    sudo mkdir -p /etc/supervisor/conf.d
    sudo mkdir -p /var/log/supervisor
    
#  Copy the supervisord configuration file to /etc/supervisor/supervisord.conf

    sudo cp supervisord.conf /etc/supervisor/supervisord.conf
    
#  Create a sym link at /etc/supervisord.conf which points to  /etc/supervisor/supervisord.conf
#  supervisorctl needs the aforementioned symlink

    sudo ln -s /etc/supervisor/supervisord.conf /etc/supervisord.conf
     

#  Copy the supervisor init script to /etc/init.d/supervisor
    
    sudo cp supervisor.init.d /etc/init.d/supervisor

#  Initialize the supervisor system service

    sudo chmod +x /etc/init.d/supervisor
    sudo update-rc.d supervisor defaults
    sudo service supervisor status
    sudo service supervisor start
